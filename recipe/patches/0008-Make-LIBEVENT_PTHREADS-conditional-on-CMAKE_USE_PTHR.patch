From 5c839471a6836dee1c9d60ac11ab7e69f99672b9 Mon Sep 17 00:00:00 2001
From: Nehal J Wani <nehaljw.kkd1@gmail.com>
Date: Mon, 19 Oct 2020 23:45:13 -0400
Subject: [PATCH 08/19] Make LIBEVENT_PTHREADS conditional on
 CMAKE_USE_PTHREADS_INIT

Requirement on LIBEVENT_PTHREADS was added by 2b84f0e3
---
 cmake/libevent.cmake | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/cmake/libevent.cmake b/cmake/libevent.cmake
index d9e3cb3b32e..84640c8ca01 100644
--- a/cmake/libevent.cmake
+++ b/cmake/libevent.cmake
@@ -91,8 +91,11 @@ MACRO (FIND_SYSTEM_LIBEVENT)
       ${LIBEVENT_CORE}
       ${LIBEVENT_EXTRA}
       ${LIBEVENT_OPENSSL}
-      ${LIBEVENT_PTHREADS}
       )
+    IF(CMAKE_USE_PTHREADS_INIT)
+      LIST(APPEND LIBEVENT_LIBRARIES ${LIBEVENT_PTHREADS})
+    ENDIF(CMAKE_USE_PTHREADS_INIT)
+
     SET(LIBEVENT_INCLUDE_DIRS ${LIBEVENT_INCLUDE_DIRECTORY})
     IF(NOT LIBEVENT_INCLUDE_DIRECTORY STREQUAL "/usr/include")
       # On FreeBSD this may interfere with BOOST_INCLUDE_DIR, so we rely on
-- 
2.33.1

